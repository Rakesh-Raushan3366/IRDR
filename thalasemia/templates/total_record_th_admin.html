{%  extends 'main.html' %}
{% load custom_tags %}
{% load extra %}
{% block content %}
{% load static %}
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
	$(function () {
		$('#example1').DataTable({
			'paging'      : true,
			'lengthChange': true,
			'searching'   : true,
			'ordering'    : true,
			'info'        : true,
			'autoWidth'   : true
		})
	})
</script>
<body>
	<br>
	<section class="content">
		<div class="row">
			<div class="col-xs-12">
				<div class="box box-primary">
					<div class="box-header">
						<h3 class="box-title">Total Record</h3>
					</div>
					<div class="box-body">
						<center>
							<!--                        <a class="btn btn-warning" href="">Export records</a></center>-->
							<br>
							{% if request.user|has_group:'Admin' %}
							<table class="table table-bordered table-condensed table-striped" id="example1">
								<thead class="bg-black">
									<tr>
										<th>Id</th>
										<th>Institute Name</th>
										{% if request.user|has_group:'Admin' %}
										<th>Patient name</th>
										<th>Gender</th>
										<th>Father name</th>
										<th>Patient Govt. Id.</th>
										<th>QC result</th>
										{% endif %}
										<th>QC status</th>
										<th>View</th>
									</tr>
								</thead>
								<tbody>
									{% for i in patient %}
									<tr>
										<!--                            <td>{{forloop.counter}}</td>-->
										<td>{{ i.th_icmr_unique_no }}</td>
										<td>{{i.register.institute_name}}</td>
										<td>{{ i.th_patient_name }}</td>
										<td>{{ i.th_gender }}</td>
										<td>{{ i.th_father_name }}</td>
										<td>{{ i.th_patient_id_no }}</td>
									</td>
									<td>{{i.quality_result}}
										<a class="btn btn-danger" href="{% url 'view_qa_qc_thalasemia' i.id %}">View </a>
									</td>
										<td>{{i.quality_status|default_if_none:"to be checked"}}
										</td>
<!--									<td>{{ i.th_date_created|date:" d-m-Y, " }}{{ i.th_date_created|time:"H:i" }}</td>-->
									<td>
										<a class="btn btn-primary" href="{% url 'view_record_th' i.id %}">View </a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
							<tfoot class="bg-black">
								<tr>
									<th>Id</th>
									<th>Institute Name</th>
									<th>Patient name</th>
									<th>Gender</th>
									<th>Father name</th>
									<th>Patient Govt. Id.</th>
									<th>QC result</th>
									<th>QC status</th>
									<th>View</th>
								</tr>
							</tfoot>
						</table>
						{% else %}
						<table class="table table-bordered table-condensed table-striped" id="example1">
							<thead class="bg-black">
								<tr>
									<th>Id</th>
									<th>Institute Name</th>
									<th>Date created</th>
									<th>View</th>
									<th>QC status</th>
									<th>QC result</th>
								</tr>
							</thead>
							<tbody>
								{% for i in patient %}
								<tr>
									<!--                            <td>{{forloop.counter}}</td>-->
									<td>{{ i.th_icmr_unique_no }}</td>
									<td>{{i.register.institute_name}}</td>
									<td>{{ i.th_date_created|date:" d-m-Y, " }}{{ i.th_date_created|time:"H:i" }}</td>
									<td>
										<a class="btn btn-primary" href="{% url 'view_record_th' i.id %}">View </a>
									</td>
									<td>{{i.quality_status|default_if_none:"to be checked"}}
										</td>
									<td>

										{% if i.quality_result is None or i.quality_status == 'Resubmitted'%}
											<a class="btn btn-success" href="{% url 'update_qa_qc_thalasemia' i.id %}">Update result </a>
											{% endif %}
											{% if i.quality_result is not None %}
											{{i.quality_result|default_if_none:'to be checked'}}
											<a class="btn bg-maroon" href="{% url 'view_qa_qc_thalasemia' i.id %}">View </a>
											{% endif %}
									</td>
								</tr>
								{% endfor %}
							</tbody>
							<tfoot class="bg-black">
								<tr>
									<th>Id</th>
									<th>Institute Name</th>
									<th>Date created</th>
									<th>View</th>
									<th>QC status</th>
									<th>QC result</th>
								</tr>
							</tfoot>
						</table>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
</body>
{% endblock %}